<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restricted Access // Level 4</title>
    <style>
        body {
            background-color: #0d0d0d;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            flex-direction: column;
        }
        .container {
            border: 2px solid #00ff41;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            text-align: center;
            width: 450px;
            position: relative;
            background: rgba(0, 20, 0, 0.9);
        }
        h1 {
            font-size: 24px;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        input {
            background: transparent;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 10px;
            width: 80%;
            margin: 10px 0;
            font-family: inherit;
            text-align: center;
        }
        button {
            background: #00ff41;
            color: #0d0d0d;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            width: 90%;
            margin-top: 20px;
        }
        button:hover {
            background: #00cc33;
        }
        .glitch {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 15px;
        }
        
        #score-board {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            border: 1px solid #00ff41;
            padding: 10px 20px;
            background: #000;
        }

        .access-granted {
            border-color: #00ff41 !important;
            box-shadow: 0 0 80px #00ff41 !important;
            background-color: #000 !important;
        }
    </style>
</head>
<body oncontextmenu="return false">

    <div id="score-board">SCORE: <span id="points">0</span></div>

    <div class="container" id="login-panel">
        <h1 id="status-text">[ SECURE LOGIN ]</h1>
        <p>Combine the 3 hidden parts to authenticate.</p>
        
        <form onsubmit="event.preventDefault(); verify();">
            <input type="text" id="flag-input" placeholder="Paste Full Flag Here" autocomplete="off">
            
            <input type="hidden" id="backup_layer" data-fragment="d1v3_1nt0_" value="system_ready">
            
            <button type="submit">AUTHENTICATE</button>
        </form>

        <div class="glitch" id="msg-area">
            System Integrity: 98%<br>
            Right-Click: DISABLED
        </div>
    </div>

    <script>
        // Security Layer: Input Verification
        // Note: The flag is hidden in the logic below using ASCII CharCodes.
        
        // Part 3/3 of the flag is hidden in this variable:
        var _config_b = { 
            id: 502, 
            sequence: "th3_d0m}" 
        };

        let solved = false;

        function verify() {
            if(solved) return; 

            const input = document.getElementById('flag-input').value;
            
            // This array represents the correct flag converted to ASCII numbers
            // It prevents the user from simply reading the flag in plain text.
            const _0x992 = [67, 84, 70, 123, 100, 51, 51, 112, 95, 100, 49, 118, 51, 95, 49, 110, 116, 48, 95, 116, 104, 51, 95, 100, 48, 109, 125];

            if (check(input, _0x992)) {
                success();
            } else {
                fail();
            }
        }

        function check(str, arr) {
            if (str.length !== arr.length) return false;
            for (let i = 0; i < str.length; i++) {
                if (str.charCodeAt(i) !== arr[i]) return false;
            }
            return true;
        }

        function success() {
            document.getElementById('status-text').innerText = "ACCESS GRANTED";
            document.getElementById('msg-area').innerHTML = "Identity Verified.<br>Welcome, Administrator.";
            document.getElementById('login-panel').classList.add('access-granted');
            
            let score = 0;
            const timer = setInterval(() => {
                score += 5;
                document.getElementById('points').innerText = score;
                if(score >= 100) clearInterval(timer);
            }, 20);
            
            solved = true;
        }

        function fail() {
            alert("ACCESS DENIED: Incorrect Flag.\n\nHint:\n1. Check HTML Comments\n2. Check Hidden Input Attributes\n3. Check JavaScript Variables");
            document.getElementById('flag-input').value = "";
        }
        
        console.log("%c DEBUG MODE", "color: red; font-size: 20px;");
        console.log("Flag verification logic loaded.");
    </script>
</body>
</html>
